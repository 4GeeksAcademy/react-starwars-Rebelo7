import React, { useState, useContext } from "react";
import { Context } from "../store/appContext";
import { useParams } from "react-router-dom";
import { Link } from "react-router-dom";
import Select from 'react-select';

export const Favorite = () => {
 const {store} = useContext(Context);
 const {kind, uid} = useParams();

 const [favorites, setFavorites] = useState([]);

 const entityData = store[kind].find(entity => entity.uid === uid);

 const handleFavorite = (personUid) => {
    if (favorites.includes(personUid)) {
        setFavorites(favorites.filter(id => id !== personUid));
    } else {
        setFavorites([...favorites, personUid]);
    }
 }

 const favoriteOptions = store.people
    .filter(person => favorites.includes(person.uid))
    .map(person => ({ value: person.uid, label: person.name }));

 return (
    <>
        <div>
            
            <button onClick={() => handleFavorite(entityData.uid)}>
              {favorites.includes(entityData.uid) ? "Remove from favorites" : "Add to favorites"}
            </button>
        </div>
  
    <p>Number of favorites: {favorites.length}</p>
    <Select options={favoriteOptions} isMulti />
    
    </>
 )
}
